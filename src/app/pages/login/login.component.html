<div class="container">

    <div class="content">
        <div class="top">
            <div class="header">
                <img src="./assets/logo.png" alt="" class="logo">
                <span class="title">小白云工具站</span>
            </div>
            <div class="desc">———— ebai.cloud ————</div>
        </div>

        <div class="main">
            <nz-tabset [(nzSelectedIndex)]="tabIndex" (nzSelectedIndexChange)="selectedChange()">

                <nz-tab nzTitle="账户密码登录">

                    <form nz-form [formGroup]="loginForm" (ngSubmit)="login()">
                        <nz-alert
                            *ngIf="loginError"
                            nzType="error"
                            nzMessage="账户或密码错误"
                            nzShowIcon
                            style="margin-bottom: 24px;"
                        >
                        </nz-alert>

                        <ng-template #userTpl>
                            <i nz-icon nzType="user" nzTheme="outline" style="color: #ef9550;margin-right: 10px"></i>
                        </ng-template>
                        <ng-template #lockTpl>
                            <i nz-icon nzType="lock" nzTheme="outline" style="color: #ef9550;margin-right: 10px"></i>
                        </ng-template>

                        <nz-form-item>
                            <nz-form-control nzErrorTip="用户名不能为空！">
                                <nz-input-group [nzPrefix]="userTpl" [nzSize]="'large'">
                                    <input
                                        type="text"
                                        nz-input
                                        formControlName="userName"
                                        placeholder="请输入用户名.."
                                        style="font-size: 14px"
                                    />
                                </nz-input-group>
                            </nz-form-control>
                        </nz-form-item>

                        <nz-form-item>
                            <nz-form-control nzErrorTip="密码不能为空！">
                                <nz-input-group [nzPrefix]="lockTpl" [nzSize]="'large'">
                                    <input
                                        type="password"
                                        nz-input
                                        formControlName="password"
                                        placeholder="请输入密码.."
                                        style="font-size: 14px"
                                    />
                                </nz-input-group>
                            </nz-form-control>
                        </nz-form-item>

                        <div nz-row>
                            <div nz-col [nzSpan]="12">
                                <label nz-checkbox formControlName="remember">
                                    <span>自动登录</span>
                                </label>
                            </div>
                            <div nz-col [nzSpan]="12" class="text-right">
                                <a>忘记密码</a>
                            </div>
                        </div>
                        <nz-form-item>
                            <nz-form-control>
                                <button nz-button class="login" [nzType]="'primary'" [nzSize]="'large'"
                                        [nzLoading]="isSpinning">登录
                                </button>
                            </nz-form-control>
                        </nz-form-item>
                        <div class="login-other">
                            <div nz-col [nzSpan]="16">
                                其他登录方式
                                <i nz-icon nzType="alipay-circle" nzTheme="outline"></i>
                                <i nz-icon nzType="taobao-circle" nzTheme="outline"></i>
                                <i nz-icon nzType="weibo-circle" nzTheme="outline"></i>
                            </div>
                            <div nz-col [nzSpan]="8" class="text-right">
                                <a (click)="goRegister()">注册账户</a>
                            </div>
                        </div>
                    </form>
                </nz-tab>


                <nz-tab nzTitle="手机号登录">
                    <form nz-form [formGroup]="loginForm" (ngSubmit)="login()">
                        <nz-alert *ngIf="mobileLoginError" nzType="error" nzMessage="验证码错误" nzShowIcon
                                  style="margin-bottom: 24px;">
                        </nz-alert>

                        <ng-template #mobileTpl>
                            <i nz-icon nzType="mobile" nzTheme="outline" style="color: #ef9550;"></i>
                        </ng-template>
                        <ng-template #mailTpl>
                            <i nz-icon nzType="mail" nzTheme="outline" style="color: #ef9550;"></i>
                        </ng-template>

                        <nz-form-item>

                            <nz-form-control [nzErrorTip]="mobileError">
                                <nz-input-group [nzPrefix]="mobileTpl" [nzSize]="'large'">
                                    <input type="tel" nz-input formControlName="mobile" placeholder="手机号"/>
                                </nz-input-group>
                            </nz-form-control>

                            <ng-template #mobileError let-control>
                                <ng-container *ngIf="control.hasError('required')">
                                    请输入手机号！
                                </ng-container>
                                <ng-container *ngIf="control.hasError('matchMobile')">
                                    手机号格式错误！
                                </ng-container>
                            </ng-template>

                        </nz-form-item>

                        <nz-form-item>
                            <nz-form-control nzErrorTip="请输入验证码！">
                                <div nz-row [nzGutter]="8">
                                    <div nz-col nzSpan="16">
                                        <nz-input-group [nzPrefix]="mailTpl" [nzSize]="'large'">
                                            <input nz-input formControlName="mail" placeholder="验证码: 123456"/>
                                        </nz-input-group>
                                    </div>
                                    <div nz-col nzSpan="8">
                                        <button type="button" nz-button [nzSize]="'large'" class="w100">获取验证码</button>
                                    </div>
                                </div>
                            </nz-form-control>
                        </nz-form-item>
                        <div nz-row>
                            <div nz-col [nzSpan]="12">
                                <label nz-checkbox formControlName="remember">
                                    <span>自动登录</span>
                                </label>
                            </div>
                            <div nz-col [nzSpan]="12" class="text-right">
                                <a>忘记密码</a>
                            </div>
                        </div>
                        <nz-form-item>
                            <nz-form-control>
                                <button nz-button class="login" [nzType]="'primary'" [nzSize]="'large'"
                                        [nzLoading]="isSpinning">登录
                                </button>
                            </nz-form-control>
                        </nz-form-item>
                        <div class="login-other">
                            <div class="flex-1">
                                其他登录方式
                                <i nz-icon nzType="alipay-circle" nzTheme="outline"></i>
                                <i nz-icon nzType="taobao-circle" nzTheme="outline"></i>
                                <i nz-icon nzType="weibo-circle" nzTheme="outline"></i>
                            </div>
                            <a (click)="goRegister()">注册账户</a>
                        </div>
                    </form>
                </nz-tab>
            </nz-tabset>
        </div>
    </div>
    <div class="footer">
        <div class="links">
            <a href="https://github.com/XiaoBaiOvO/ebai_cloud_service">Ebai Cloud</a>
            <a href="https://github.com/XiaoBaiOvO?tab=repositories">
                <i nz-icon nzType="ant-cloud" nzTheme="outline"></i>
            </a>
            <a href="https://github.com/XiaoBaiOvO/ebai_cloud_web">Angular x Ant</a>
        </div>
        <a class="copyright desc">———————————————————</a>
        <div class="copyright">
            ebai.cloud
            <i nz-icon nzType="copyright" nzTheme="outline" ></i>
            2022
            <i style="margin-left: 10px"></i>
            Implement By XiaoBai
        </div>
    </div>
</div>
